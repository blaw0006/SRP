<launch>
  <!-- arecord -l will show available input devices, use the car number as
      the first number and the subdevice number as the second in a string
      like hw:1,0 
      
      Note: group tag has the same function as specifying ns in the node, allowing instances of the same node to be started with different topics.
      Try to start multiple nodes with different group tags (namespaces)
      -->
  <arg name="dst" default="appsink"/>
  <arg name="device" default=""/>
  <arg name="format" default="mp3"/>
  <arg name="bitrate" default="128"/>
  <arg name="channels" default="1"/>
  <arg name="depth" default="16"/>
  <arg name="sample_rate" default="16000"/>
  <arg name="sample_format" default="S16LE"/>
  <arg name="ns" default="audio"/>
  <arg name="audio_topic" default="audio"/>

  <group ns="$(arg ns)">
    <node name="audio_capture" pkg="audio_capture" type="audio_capture" output="screen">
      <remap from="audio" to="$(arg audio_topic)" />
      <param name="dst" value="$(arg dst)"/>
      <param name="device" value="arg device"/>
      <param name="format" value="$(arg format)"/>
      <param name="bitrate" value="$(arg bitrate)"/>
      <param name="channels" value="$(arg channels)"/>
      <param name="depth" value="$(arg depth)"/>
      <param name="sample_rate" value="$(arg sample_rate)"/>
      <param name="sample_format" value="$(arg sample_format)"/>
    </node>
  </group>
  <!--
  <group ns="mic2">
    <node name="audio_capture" pkg="audio_capture" type="audio_capture" output="screen">
      <remap from="audio" to="$(arg audio_topic)" />
      <param name="dst" value="$(arg dst)"/>
      <param name="device" value="hw:3,0"/>
      <param name="format" value="$(arg format)"/>
      <param name="bitrate" value="$(arg bitrate)"/>
      <param name="channels" value="$(arg channels)"/>
      <param name="depth" value="$(arg depth)"/>
      <param name="sample_rate" value="$(arg sample_rate)"/>
      <param name="sample_format" value="$(arg sample_format)"/>
    </node>
  </group>

  <group ns="mic3">
    <node name="audio_capture" pkg="audio_capture" type="audio_capture" output="screen">
      <remap from="audio" to="$(arg audio_topic)" />
      <param name="dst" value="$(arg dst)"/>
      <param name="device" value="hw:4,0"/>
      <param name="format" value="$(arg format)"/>
      <param name="bitrate" value="$(arg bitrate)"/>
      <param name="channels" value="$(arg channels)"/>
      <param name="depth" value="$(arg depth)"/>
      <param name="sample_rate" value="$(arg sample_rate)"/>
      <param name="sample_format" value="$(arg sample_format)"/>
    </node>
  </group>

  <group ns="mic4">
    <node name="audio_capture" pkg="audio_capture" type="audio_capture" output="screen">
      <remap from="audio" to="$(arg audio_topic)" />
      <param name="dst" value="$(arg dst)"/>
      <param name="device" value="h:5,0"/>
      <param name="format" value="$(arg format)"/>
      <param name="bitrate" value="$(arg bitrate)"/>
      <param name="channels" value="$(arg channels)"/>
      <param name="depth" value="$(arg depth)"/>
      <param name="sample_rate" value="$(arg sample_rate)"/>
      <param name="sample_format" value="$(arg sample_format)"/>
    </node>
  </group>
  -->

</launch>
